# =============================================================================
# Lockup Backend Environment Configuration
# 复制此文件为 .env 并填入实际值
# =============================================================================

# =============================================================================
# Django Core Settings (生产环境必须配置)
# =============================================================================

# Django Secret Key (生产环境必须更换为强随机字符串)
SECRET_KEY=your-super-secret-django-key-here-64-characters-minimum

# Debug Mode (生产环境必须设置为 false)
DEBUG=false

# Allowed Hosts (生产环境必须设置正确的域名)
ALLOWED_HOSTS=lock-down.zheermao.top,lock-up.zheermao.top,47.79.92.7

# =============================================================================
# Database Configuration (可选，默认使用 SQLite)
# =============================================================================

# PostgreSQL Database URL (生产环境推荐)
# DATABASE_URL=postgresql://username:password@localhost:5432/lockup_production

# =============================================================================
# CORS Configuration (生产环境必须配置)
# =============================================================================

# CORS Allowed Origins (前端域名)
CORS_ALLOWED_ORIGINS=https://lock-down.zheermao.top,https://lock-up.zheermao.top

# =============================================================================
# Telegram Bot Configuration (必须配置)
# =============================================================================

# Telegram Bot Token (必需) - 从 @BotFather 获取
TELEGRAM_BOT_TOKEN=8593610083:AAEHkca4MOhtkaDJRQnQtzYQVDloWLIiJsE

# Telegram Bot Username (必需) - 不包含 @
TELEGRAM_BOT_USERNAME=lock_up_bot

# Webhook URL (生产环境必需)
TELEGRAM_WEBHOOK_URL=https://lock-down.zheermao.top/api/telegram/webhook/

# Webhook Secret Token (生产环境必须设置强随机字符串)
TELEGRAM_WEBHOOK_SECRET=your-webhook-secret-token-here-64-characters

# =============================================================================
# Telegram Security Configuration (生产环境推荐配置)
# =============================================================================

# Rate Limiting
TELEGRAM_RATE_LIMIT_ENABLED=true
TELEGRAM_MAX_REQUESTS_PER_MINUTE=30

# IP 白名单 (可选，用逗号分隔) - Telegram 官方IP范围
# 完整的 Telegram IP 范围：149.154.160.0/20, 91.108.4.0/22, 149.154.164.0/22, 149.154.168.0/22
TELEGRAM_IP_WHITELIST=149.154.160.0/20,91.108.4.0/22,149.154.164.0/22,149.154.168.0/22

# Bot 自动启动 (可选)
TELEGRAM_AUTO_START_BOT=true

# =============================================================================
# Application URLs Configuration
# =============================================================================

# 后端 API 基础 URL
BASE_URL=https://lock-down.zheermao.top

# 前端应用 URL
FRONTEND_URL=https://lock-down.zheermao.top

# =============================================================================
# Production Security Settings (生产环境推荐配置)
# =============================================================================

# SSL/HTTPS 强制 (生产环境推荐启用)
SECURE_SSL_REDIRECT=true
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=true
SECURE_HSTS_PRELOAD=true

# Cookie 安全 (生产环境推荐启用)
SESSION_COOKIE_SECURE=true
CSRF_COOKIE_SECURE=true

# =============================================================================
# Email Configuration (邮件服务配置)
# =============================================================================

# Mailgun 配置 (主要邮件服务)
MAILGUN_API_KEY=your-mailgun-api-key-here
MAILGUN_SENDER_DOMAIN=lock-up.zheermao.top
DEFAULT_FROM_EMAIL=noreply@lock-up.zheermao.top
SERVER_EMAIL=server@lock-up.zheermao.top

# 备用 SMTP 配置 (当 Mailgun 失败时使用)
FALLBACK_EMAIL_HOST=localhost
FALLBACK_EMAIL_PORT=25
FALLBACK_EMAIL_USE_TLS=false
FALLBACK_EMAIL_HOST_USER=
FALLBACK_EMAIL_HOST_PASSWORD=

# 测试邮箱 (用于测试)
TEST_EMAIL=test@example.com

# =============================================================================
# Development Settings (开发环境可选配置)
# =============================================================================

# 开发环境示例配置 (生产环境删除或注释这些行)
# DEBUG=true
# ALLOWED_HOSTS=localhost,127.0.0.1,testserver
# CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173
# TELEGRAM_WEBHOOK_URL=https://your-ngrok-url.ngrok.io/api/telegram/webhook/
# SECURE_SSL_REDIRECT=false

# =============================================================================
# Configuration Notes
# =============================================================================

# 1. 生产环境部署时必须修改的配置：
#    - SECRET_KEY: 生成64位强随机字符串
#    - DEBUG: 设置为 false
#    - ALLOWED_HOSTS: 设置正确的域名
#    - CORS_ALLOWED_ORIGINS: 设置前端域名
#    - TELEGRAM_WEBHOOK_SECRET: 生成强随机字符串
#
# 2. 可选但推荐的配置：
#    - DATABASE_URL: 使用 PostgreSQL 数据库
#    - TELEGRAM_IP_WHITELIST: 限制 webhook 来源IP
#    - 安全设置: SSL重定向、安全Cookie等
#
# 3. 安全提醒：
#    - 确保 .env 文件不被提交到 Git 仓库
#    - 设置文件权限为 600 (仅所有者可读写)
#    - 定期轮换敏感令牌和密钥
#
# 4. 生成强随机字符串的方法：
#    - SECRET_KEY: python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
#    - TELEGRAM_WEBHOOK_SECRET: openssl rand -hex 32